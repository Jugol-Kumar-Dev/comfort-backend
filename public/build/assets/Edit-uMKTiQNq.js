import{S as g}from"./SummernoteEditor-iPRbPdkx.js";import{_}from"./TreeCategory-581kyqq-.js";import{_ as y,aV as d,c as n,a as t,w as C,P as p,b as c,v as m,b7 as v,H as h,O as x,o as l}from"./app-g0Cj44fV.js";const b={name:"Edit",components:{TreeCategory:_,SummernoteEditor:g},data(){return{from:{parent:null,name:"",description:"",details:"",photo:""},avatar:{},errors:{}}},methods:{uploadFile(r){this.avatar=r.target.files[0],this.from.photo=URL.createObjectURL(r.target.files[0])},updateCategory(){let r=this.$route.params.id,e=new FormData;e.append("id",r),e.append("name",this.from.name),e.append("description",this.from.description),e.append("photo",this.avatar),this.$axios.post("/api/category/update",e).then(a=>{this.from="",this.errors="",Toast.fire({icon:"success",title:a.data.message}),this.$router.push({name:"ManageCategory"})}).catch(a=>{this.errors=a.response.data.errors,Toast.fire({icon:"warning",title:a.response.statusText})})},isLogined(){User.loggedIn()||this.$router.push({name:"Login"})}},created(){this.isLogined();let r=this.$route.params.id;this.$axios.get("/api/category/"+r).then(e=>{this.from=e.data}).catch(e=>{console.log(e.response.data)})}},w={class:"card card-custom"},L=t("div",{class:"card-header"},[t("h3",{class:"card-title"},"Edit Category")],-1),V={class:"card-body"},k={class:"form-group"},E=t("label",null,"Parent Category",-1),S={class:"form-group"},T=t("label",null,"Category Name",-1),U={key:0,class:"text-danger"},D={class:"form-group"},M=t("label",null,"Category Description",-1),N={class:"form-group"},B=t("label",null,"Category Details",-1),F={class:"form-group"},j={class:"btn btn-clean",style:{border:"dashed 2px",padding:"20px 82px"}},z=x('<span class="svg-icon svg-icon-primary svg-icon-2x"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="80px!important" height="80px!important" viewBox="0 0 24 24" version="1.1"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><rect x="0" y="0" width="24" height="24"></rect><path d="M2,13 C2,12.5 2.5,12 3,12 C3.5,12 4,12.5 4,13 C4,13.3333333 4,15 4,18 C4,19.1045695 4.8954305,20 6,20 L18,20 C19.1045695,20 20,19.1045695 20,18 L20,13 C20,12.4477153 20.4477153,12 21,12 C21.5522847,12 22,12.4477153 22,13 L22,18 C22,20.209139 20.209139,22 18,22 L6,22 C3.790861,22 2,20.209139 2,18 C2,15 2,13.3333333 2,13 Z" fill="#000000" fill-rule="nonzero" opacity="0.3"></path><rect fill="#000000" opacity="0.3" x="11" y="2" width="2" height="14" rx="1"></rect><path d="M12.0362375,3.37797611 L7.70710678,7.70710678 C7.31658249,8.09763107 6.68341751,8.09763107 6.29289322,7.70710678 C5.90236893,7.31658249 5.90236893,6.68341751 6.29289322,6.29289322 L11.2928932,1.29289322 C11.6689749,0.916811528 12.2736364,0.900910387 12.6689647,1.25670585 L17.6689647,5.75670585 C18.0794748,6.12616487 18.1127532,6.75845471 17.7432941,7.16896473 C17.3738351,7.57947475 16.7415453,7.61275317 16.3310353,7.24329415 L12.0362375,3.37797611 Z" fill="#000000" fill-rule="nonzero"></path></g></svg></span>',1),O=["src"],P=t("div",{class:"card-footer"},[t("button",{type:"submit",class:"btn btn-primary mr-2"},"Submit"),t("button",{type:"reset",class:"btn btn-secondary"},"Cancel")],-1);function R(r,e,a,Z,o,i){const u=d("TreeCategory"),f=d("SummernoteEditor");return l(),n("div",null,[t("div",w,[L,t("form",{class:"form",onSubmit:e[5]||(e[5]=C(s=>i.updateCategory(),["prevent"])),enctype:"multipart/form-data"},[t("div",V,[t("div",k,[E,p(u,{modelValue:o.from.parent,"onUpdate:modelValue":e[0]||(e[0]=s=>o.from.parent=s)},null,8,["modelValue"])]),t("div",S,[T,c(t("input",{type:"text",class:"form-control form-control-solid","onUpdate:modelValue":e[1]||(e[1]=s=>o.from.name=s),placeholder:"Enter category name..."},null,512),[[m,o.from.name]]),o.errors.name?(l(),n("small",U,v(o.errors.name[0]),1)):h("",!0)]),t("div",D,[M,c(t("textarea",{class:"form-control","onUpdate:modelValue":e[2]||(e[2]=s=>o.from.description=s),rows:"3",placeholder:"category description......."},null,512),[[m,o.from.description]])]),t("div",N,[B,p(f,{modelValue:o.from.details,"onUpdate:modelValue":e[3]||(e[3]=s=>o.from.details=s)},null,8,["modelValue"])]),t("div",F,[t("label",j,[t("input",{type:"file",onChange:e[4]||(e[4]=(...s)=>i.uploadFile&&i.uploadFile(...s)),hidden:""},null,32),z])]),o.from.photo?(l(),n("img",{key:0,src:o.from.photo,alt:"",style:{width:"180px",height:"120px","object-fit":"contain"}},null,8,O)):h("",!0)]),P],32)])])}const A=y(b,[["render",R]]);export{A as default};
