import{aW as u,_ as pt,bJ as ft,N as st,aK as yt,r as bt,c as f,a as t,F as B,i as A,bj as x,e as L,t as d,h as gt,w as wt,g as at,b as lt,j as xt,v as Ct,o as y,p as kt,d as St,$ as D}from"./app-_aaoa6OJ.js";import{_ as It}from"./TreeCategory-yXiW4ULw.js";import{I as it,e as Tt,d as ot,a6 as Lt,af as Qt,g as $t}from"./array_store-hGikq-i7.js";var Q=$t(),nt=it.abstract,Mt=it.inherit({ctor:function(e,i){this._store=e,this._dirty=!!i.data,this.save();var v=this._immediate=i.immediate,M=Math.max(100,i.flushInterval||1e4);if(!v){var c=this.save.bind(this);setInterval(c,M),Tt.on(Q,"beforeunload",c),Q.cordova&&ot.listen(ot.getDocument(),"pause",c,!1)}},notifyChanged:function(){this._dirty=!0,this._immediate&&this.save()},load:function(){this._store._array=this._loadImpl(),this._dirty=!1},save:function(){this._dirty&&(this._saveImpl(this._store._array),this._dirty=!1)},_loadImpl:nt,_saveImpl:nt}),Bt=Mt.inherit({ctor:function(e,i){var v=i.name;if(!v)throw Lt.Error("E4013");this._key="dx-data-localStore-"+v,this.callBase(e,i)},_loadImpl:function(){var e=Q.localStorage.getItem(this._key);return e?JSON.parse(e):[]},_saveImpl:function(e){e.length?Q.localStorage.setItem(this._key,JSON.stringify(e)):Q.localStorage.removeItem(this._key)}}),Dt={dom:Bt};Qt.inherit({ctor:function(e){typeof e=="string"?e={name:e}:e=e||{},this.callBase(e),this._backend=new Dt[e.backend||"dom"](this,e),this._backend.load()},_clearCache(){this._backend.load()},clear:function(){this.callBase(),this._backend.notifyChanged()},_insertImpl:function(e){var i=this._backend;return this.callBase(e).done(i.notifyChanged.bind(i))},_updateImpl:function(e,i){var v=this._backend;return this.callBase(e,i).done(v.notifyChanged.bind(v))},_removeImpl:function(e){var i=this._backend;return this.callBase(e).done(i.notifyChanged.bind(i))}},"local");function At(){let e=u([]);const i=async a=>{const o=e.value.findIndex(r=>(r==null?void 0:r.id)===(a==null?void 0:a.id));o>-1?e.value[o].buyQty<e.value[o].qty?(e.value[o].buyQty++,Toast.fire({icon:"success",title:"Quantity Updated..."})):Toast.fire({icon:"warning",title:"Max Quantity exist..."}):(e.value.push(a),Toast.fire({icon:"success",title:"Added To Pos..."})),await m()},v=async a=>{const o=e.value.findIndex(r=>(r==null?void 0:r.id)===a);o>-1&&(e.value[o].buyQty<e.value[o].qty?(console.log("buy qty",e.value[o].buyQty),console.log("main qty",e.value[o].qty),e.value[o].buyQty++,Toast.fire({icon:"success",title:"Quantity Updated..."})):Toast.fire({icon:"warning",title:"Max Quantity exist..."})),await m()},M=async a=>{const o=e.value.findIndex(r=>(r==null?void 0:r.id)===a);o>-1&&(e.value[o].buyQty>1?(e.value[o].buyQty--,Toast.fire({icon:"success",title:"Quantity Updated..."})):Toast.fire({icon:"warning",title:"Min Quantity 1 ...."})),await m()},c=async a=>{const o=e.value.indexOf(a);o>-1&&(e.value.splice(o,1),Toast.fire({icon:"success",title:"Remove From Pos..."})),await m()},_=()=>{localStorage.removeItem("pos_cart"),e.value=[]},C=()=>{const a=localStorage.getItem("pos_cart");a&&(e.value=JSON.parse(a))},k=()=>e.value,g=()=>{let a=0;return e.value.map(o=>(a+=o.price*o.buyQty,a)),a},m=async()=>{localStorage.setItem("pos_cart",JSON.stringify(e.value))};return{addToCart:i,initCart:C,incrementQty:v,decrementQty:M,removeFromCart:c,getAllItems:k,getSubTotal:g,clearCart:_,cart:e}}const h=e=>(kt("data-v-47d79390"),e=e(),St(),e),Vt={class:"row match-height"},Pt={class:"col-md-6"},Nt={class:"card card-custom"},Ut=h(()=>t("div",{class:"card-header flex-wrap py-5"},[t("div",{class:"card-title"},[t("h3",{class:"card-label"},[L("Product Carts "),t("span",{class:"d-block text-muted pt-2 font-size-sm"},"all employees details is here")])])],-1)),jt={class:"card-body pos-card-body"},qt={class:"table table-separate table-head-custom table-checkable",id:""},zt=h(()=>t("thead",{class:"pos-t-head"},[t("tr",null,[t("th",{style:{width:"30%"}},"Title"),t("th",null,"Qty"),t("th",null,"Unit"),t("th",null,"Total"),t("th",null,"Action")])],-1)),Ft=["onClick"],Jt=["onClick"],Et=D('<span class="svg-icon svg-icon-md" data-v-47d79390><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" data-v-47d79390><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" data-v-47d79390><rect x="0" y="0" width="24" height="24" data-v-47d79390></rect><circle fill="#000000" opacity="0.3" cx="12" cy="12" r="10" data-v-47d79390></circle><path d="M11,11 L11,7 C11,6.44771525 11.4477153,6 12,6 C12.5522847,6 13,6.44771525 13,7 L13,11 L17,11 C17.5522847,11 18,11.4477153 18,12 C18,12.5522847 17.5522847,13 17,13 L13,13 L13,17 C13,17.5522847 12.5522847,18 12,18 C11.4477153,18 11,17.5522847 11,17 L11,13 L7,13 C6.44771525,13 6,12.5522847 6,12 C6,11.4477153 6.44771525,11 7,11 L11,11 Z" fill="#000000" data-v-47d79390></path></g></svg></span>',1),Ot=[Et],Ht=["onClick"],Kt=D('<span class="svg-icon svg-icon-md" data-v-47d79390><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" data-v-47d79390><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" data-v-47d79390><rect x="0" y="0" width="24" height="24" data-v-47d79390></rect><circle fill="#000000" opacity="0.3" cx="12" cy="12" r="10" data-v-47d79390></circle><rect fill="#000000" x="6" y="11" width="12" height="2" rx="1" data-v-47d79390></rect></g></svg></span>',1),Rt=[Kt],Zt=["onClick"],Wt=D('<span class="svg-icon svg-icon-md" data-v-47d79390><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" data-v-47d79390><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" data-v-47d79390><rect x="0" y="0" width="24" height="24" data-v-47d79390></rect><path d="M6,8 L6,20.5 C6,21.3284271 6.67157288,22 7.5,22 L16.5,22 C17.3284271,22 18,21.3284271 18,20.5 L18,8 L6,8 Z" fill="#000000" fill-rule="nonzero" data-v-47d79390></path><path d="M14,4.5 L14,4 C14,3.44771525 13.5522847,3 13,3 L11,3 C10.4477153,3 10,3.44771525 10,4 L10,4.5 L5.5,4.5 C5.22385763,4.5 5,4.72385763 5,5 L5,5.5 C5,5.77614237 5.22385763,6 5.5,6 L18.5,6 C18.7761424,6 19,5.77614237 19,5.5 L19,5 C19,4.72385763 18.7761424,4.5 18.5,4.5 L14,4.5 Z" fill="#000000" opacity="0.3" data-v-47d79390></path></g></svg></span>',1),Gt=[Wt],Xt={key:0,class:"pos-account"},Yt={class:"fw-bolder"},te={class:"card card-custom mt-5"},ee={class:"card-body"},se={class:"form-group"},ae=h(()=>t("label",null,"Select Customer",-1)),le={class:"form-group"},oe=h(()=>t("label",null,"Payment Method",-1)),ne=D('<option disabled="true" selected value="" data-v-47d79390>~~ Select Payment Method~~</option><option value="han_cash" data-v-47d79390>Han Cash</option><option value="bKash" data-v-47d79390>bKash</option><option value="rocket" data-v-47d79390>Rocket</option><option value="credit_card" data-v-47d79390>Credit Card</option><option value="bank_check" data-v-47d79390>Bank Check</option>',6),ie=[ne],ce=h(()=>t("div",{class:"card-footer"},[t("button",{type:"submit",class:"btn btn-primary mr-2"},"Submit"),t("button",{type:"reset",class:"btn btn-secondary"},"Cancel")],-1)),de={class:"col-md-6"},re={class:"card card-custom"},ue=h(()=>t("div",{class:"card-header flex-wrap py-5"},[t("div",{class:"card-title"},[t("h3",{class:"card-label"},[L("All Products "),t("span",{class:"d-block text-muted pt-2 font-size-sm"},"all products with product details")])])],-1)),ve={class:"card-body"},he={class:"example-preview"},_e={class:"tab-content mt-5 show-product-overflow",id:"myTabContent1"},me={class:"tab-pane fade show active",id:"home-1",role:"tabpanel","aria-labelledby":"home-tab-1"},pe={class:"row match-height px-1"},fe=["onDblclick"],ye={class:"card cursor-pointer"},be={class:"card-body p-0 d-flex flex-column justify-content-between"},ge={class:"card-image"},we=["src"],xe={class:"card-heading"},Ce={class:"card-text"},ke=["onClick"],Se={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Ie={class:"modal-dialog modal-lg"},Te={class:"modal-content"},Le={class:"modal-body"},Qe={class:"row"},$e={class:"col-md-6"},Me={class:"row"},Be={class:"col-md-4"},De={class:"img-preview-scroll"},Ae=["src"],Ve={class:"col-md-8"},Pe=["src"],Ne={class:"col-md-6"},Ue={class:"text-capitalize fw-bold"},je={class:"text-capitalize"},qe={class:"fw-bolder fs-2"},ze={class:"row border-top mt-3"},Fe={class:"col-md-12"},Je=h(()=>t("hr",null,null,-1)),Ee=h(()=>t("h3",null,"Desscription",-1)),Oe=h(()=>t("hr",null,null,-1)),He=h(()=>t("h3",null,"Desscription",-1)),Ke=["innerHTML"],Re={__name:"Index",setup(e){const{sendRequest:i,loading:v,error:M}=ft(),c=At(),_=u({customer:"",payby:""}),C=u([]),k=u([]),g=u(null),m=u(null),a=u([]);u([]),u([]),u(null),u([]);const o=async()=>{const l=await i("api/admin/pos-products");k&&(k.value=l)},r=async()=>{const l=await i("api/customer");l&&(C.value=l)},ct=st(()=>{let l=k.value;return g.value&&(l=l.filter(n=>{var b,p;return(p=(b=n==null?void 0:n.product)==null?void 0:b.title)==null?void 0:p.toLowerCase().includes(g.value)})),m.value&&(l=l.filter(n=>{var b,p;return((p=(b=n==null?void 0:n.product)==null?void 0:b.category)==null?void 0:p.id)===m.value})),l}),dt=l=>{c.addToCart({...l,buyQty:1})},rt=()=>{c.addToCart({...a.value,buyQty:1}),$("#exampleModal").modal("hide")},ut=l=>{$("#exampleModal").modal("show"),a.value=l},vt=async()=>{const l=await i({url:"api/pos",method:"POST",data:{..._.value,subTotal:c.getSubTotal(),products:c.getAllItems()}});l.message&&(c.clearCart(),_.value.customer="",_.value.payby="",Toast.fire({icon:"success",title:l.message}))},ht=l=>{console.log(l)};st(()=>{let l=0;return c.getAllItems().map(n=>(l+=n.price*n.buyQty,l)),l});const _t=l=>{C.value.filter(n=>n.id===l)[0]};return yt(()=>{o(),r(),c.initCart()}),(l,n)=>{var p,V,P,N,U,j,q,z,F,J,E,O,H,K,R,Z,W,G,X;const b=bt("v-select");return y(),f(B,null,[t("div",null,[t("div",Vt,[t("div",Pt,[t("div",Nt,[Ut,t("div",jt,[t("table",qt,[zt,t("tbody",null,[(y(!0),f(B,null,A(x(c).getAllItems(),(s,S)=>{var I,T;return y(),f("tr",{key:`card-product-${S}`},[t("td",null,[t("a",{href:"#",onClick:w=>l.showSingleProduct(s.id)},d((T=(I=s==null?void 0:s.product)==null?void 0:I.title)==null?void 0:T.slice(0,10))+"...",9,Ft)]),t("td",null,[L(d(s.buyQty)+" ",1),t("a",{href:"javascript:void(0);",onClick:w=>x(c).incrementQty(s.id),class:"btn btn-sm btn-clean btn-icon",title:"Delete"},Ot,8,Jt),t("a",{href:"javascript:;",onClick:w=>x(c).decrementQty(s.id),class:"btn btn-sm btn-clean btn-icon",title:"Delete"},Rt,8,Ht)]),t("td",null,d(s.price)+" $",1),t("td",null,d(s.price*(s==null?void 0:s.buyQty))+" $",1),t("td",null,[t("a",{href:"javascript:void(0)",onClick:w=>x(c).removeFromCart(s),class:"btn btn-sm btn-clean btn-icon",title:"Delete"},Gt,8,Zt)])])}),128))])]),x(c).getSubTotal()>0?(y(),f("div",Xt,[L(" Total Items: "),t("h4",Yt,"Sub Total: "+d(x(c).getSubTotal())+" $",1)])):gt("",!0)])]),t("div",te,[t("div",ee,[t("form",{onSubmit:n[2]||(n[2]=wt(s=>vt(),["prevent"]))},[t("div",se,[ae,at(b,{options:C.value,class:"form-control form-control-solid",style:{padding:"0.375rem 0.75rem"},modelValue:_.value.customer,"onUpdate:modelValue":[n[0]||(n[0]=s=>_.value.customer=s),_t],reduce:s=>s.id,label:"full_name",placeholder:"Select Customer..."},null,8,["options","modelValue","reduce"])]),t("div",le,[oe,lt(t("select",{class:"form-control form-control-solid","onUpdate:modelValue":n[1]||(n[1]=s=>_.value.payby=s)},ie,512),[[xt,_.value.payby]])]),ce],32)])])]),t("div",de,[t("div",re,[ue,t("div",ve,[lt(t("input",{type:"text","onUpdate:modelValue":n[3]||(n[3]=s=>g.value=s),class:"form-control form-control-solid mb-3",placeholder:"Search....."},null,512),[[Ct,g.value]]),t("div",he,[at(It,{class:"form-control form-control-solid",style:{padding:"0.375rem 0.75rem"},modelValue:m.value,"onUpdate:modelValue":[n[4]||(n[4]=s=>m.value=s),ht]},null,8,["modelValue"]),t("div",_e,[t("div",me,[t("div",pe,[(y(!0),f(B,null,A(ct.value,(s,S)=>{var I,T,w,Y,tt,et;return y(),f("div",{class:"col-md-4 mt-2 px-1",onDblclick:mt=>dt(s),key:`pos-s-roduct-${S}`},[t("div",ye,[t("div",be,[t("div",ge,[t("img",{src:`${(T=(I=s==null?void 0:s.product)==null?void 0:I.images[0])==null?void 0:T.url}`},null,8,we)]),t("div",xe,d((Y=(w=s==null?void 0:s.product)==null?void 0:w.title)==null?void 0:Y.slice(0,10))+" - "+d((et=(tt=s.varient)==null?void 0:tt.replace(/\//g,"-"))==null?void 0:et.slice(0,-1))+"... ",1),t("div",Ce,d(s==null?void 0:s.price)+" $ ",1),t("a",{href:"javascript:void(0)",class:"card-button",onClick:mt=>ut(s)},"Show Details",8,ke)])])],40,fe)}),128))])])])])])])])])]),t("div",Se,[t("div",Ie,[t("div",Te,[t("div",Le,[t("div",Qe,[t("div",$e,[t("div",Me,[t("div",Be,[t("div",De,[(y(!0),f(B,null,A((V=(p=a.value)==null?void 0:p.product)==null?void 0:V.images,(s,S)=>(y(),f("img",{class:"w-100",src:`${s==null?void 0:s.url}`,key:`single-image-${S}`},null,8,Ae))),128))])]),t("div",Ve,[t("img",{class:"w-100",src:`${(U=(N=(P=a.value)==null?void 0:P.product)==null?void 0:N.images[0])==null?void 0:U.url}`},null,8,Pe)])])]),t("div",Ne,[t("h1",Ue,d((q=(j=a.value)==null?void 0:j.product)==null?void 0:q.title)+"-"+d((F=(z=a.value.varient)==null?void 0:z.replace(/\//g,"-"))==null?void 0:F.slice(0,-1)),1),t("h4",null,"Product Sku: "+d((J=a.value)==null?void 0:J.sku),1),t("p",null,[L("Category: "),t("strong",null,d((H=(O=(E=a.value)==null?void 0:E.product)==null?void 0:O.category)==null?void 0:H.name),1)]),t("p",je,"Variation: "+d((R=(K=a.value.varient)==null?void 0:K.replace(/\//g,"-"))==null?void 0:R.slice(0,-1)),1),t("h2",qe,"Price: "+d(a.value.price)+" $",1),t("div",{class:"border-t w-100"},[t("button",{class:"btn btn-primary w-100 rounded-0 py-5 fs-2 fw-bold",onClick:rt},"Add To Pos")])])]),t("div",ze,[t("div",Fe,[Je,t("div",null,[Ee,t("p",null,d((W=(Z=a.value)==null?void 0:Z.product)==null?void 0:W.description),1)]),Oe,t("div",null,[He,t("div",{class:"product-content",innerHTML:(X=(G=a.value)==null?void 0:G.product)==null?void 0:X.details},null,8,Ke)])])])])])])])],64)}}},Xe=pt(Re,[["__scopeId","data-v-47d79390"]]);export{Xe as default};
