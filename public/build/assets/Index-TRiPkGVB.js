import{aQ as r,_ as ut,bH as vt,z as tt,aE as ht,aV as _t,c as m,a as t,F as Q,aT as V,bg as p,e as w,b7 as c,H as mt,w as bt,P as et,b as st,br as pt,v as yt,G as ft,o as u,p as gt,d as wt,O as I}from"./app-g0Cj44fV.js";import{_ as xt}from"./TreeCategory-581kyqq-.js";import{C as Ct}from"./ComponentLoader-9sz8TMfG.js";function kt(){let a=r([]);const x=async s=>{const l=a.value.findIndex(d=>(d==null?void 0:d.id)===(s==null?void 0:s.id));l>-1?a.value[l].buyQty<a.value[l].qty?(a.value[l].buyQty++,Toast.fire({icon:"success",title:"Quantity Updated..."})):Toast.fire({icon:"warning",title:"Max Quantity exist..."}):(a.value.push(s),Toast.fire({icon:"success",title:"Added To Pos..."})),await _()},M=async s=>{const l=a.value.findIndex(d=>(d==null?void 0:d.id)===s);l>-1&&(a.value[l].buyQty<a.value[l].qty?(console.log("buy qty",a.value[l].buyQty),console.log("main qty",a.value[l].qty),a.value[l].buyQty++,Toast.fire({icon:"success",title:"Quantity Updated..."})):Toast.fire({icon:"warning",title:"Max Quantity exist..."})),await _()},P=async s=>{const l=a.value.findIndex(d=>(d==null?void 0:d.id)===s);l>-1&&(a.value[l].buyQty>1?(a.value[l].buyQty--,Toast.fire({icon:"success",title:"Quantity Updated..."})):Toast.fire({icon:"warning",title:"Min Quantity 1 ...."})),await _()},i=async s=>{const l=a.value.indexOf(s);l>-1&&(a.value.splice(l,1),Toast.fire({icon:"success",title:"Remove From Pos..."})),await _()},h=()=>{localStorage.removeItem("pos_cart"),a.value=[]},C=()=>{const s=localStorage.getItem("pos_cart");s&&(a.value=JSON.parse(s))},k=()=>a.value,f=()=>{let s=0;return a.value.map(l=>(s+=l.price*l.buyQty,s)),s},_=async()=>{localStorage.setItem("pos_cart",JSON.stringify(a.value))};return{addToCart:x,initCart:C,incrementQty:M,decrementQty:P,removeFromCart:i,getAllItems:k,getSubTotal:f,clearCart:h,cart:a}}const v=a=>(gt("data-v-9770ab00"),a=a(),wt(),a),Tt={class:"row match-height"},Lt={class:"col-md-6"},St={class:"card card-custom"},Qt=v(()=>t("div",{class:"card-header flex-wrap py-5"},[t("div",{class:"card-title"},[t("h3",{class:"card-label"},[w("Product Carts "),t("span",{class:"d-block text-muted pt-2 font-size-sm"},"all employees details is here")])])],-1)),$t={class:"card-body pos-card-body"},It={class:"table table-separate table-head-custom table-checkable",id:""},Mt=v(()=>t("thead",{class:"pos-t-head"},[t("tr",null,[t("th",{style:{width:"30%"}},"Title"),t("th",null,"Qty"),t("th",null,"Unit"),t("th",null,"Total"),t("th",null,"Action")])],-1)),Pt=["onClick"],Vt=["onClick"],Dt=I('<span class="svg-icon svg-icon-md" data-v-9770ab00><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" data-v-9770ab00><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" data-v-9770ab00><rect x="0" y="0" width="24" height="24" data-v-9770ab00></rect><circle fill="#000000" opacity="0.3" cx="12" cy="12" r="10" data-v-9770ab00></circle><path d="M11,11 L11,7 C11,6.44771525 11.4477153,6 12,6 C12.5522847,6 13,6.44771525 13,7 L13,11 L17,11 C17.5522847,11 18,11.4477153 18,12 C18,12.5522847 17.5522847,13 17,13 L13,13 L13,17 C13,17.5522847 12.5522847,18 12,18 C11.4477153,18 11,17.5522847 11,17 L11,13 L7,13 C6.44771525,13 6,12.5522847 6,12 C6,11.4477153 6.44771525,11 7,11 L11,11 Z" fill="#000000" data-v-9770ab00></path></g></svg></span>',1),At=[Dt],Bt=["onClick"],Ut=I('<span class="svg-icon svg-icon-md" data-v-9770ab00><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" data-v-9770ab00><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" data-v-9770ab00><rect x="0" y="0" width="24" height="24" data-v-9770ab00></rect><circle fill="#000000" opacity="0.3" cx="12" cy="12" r="10" data-v-9770ab00></circle><rect fill="#000000" x="6" y="11" width="12" height="2" rx="1" data-v-9770ab00></rect></g></svg></span>',1),Nt=[Ut],qt=["onClick"],zt=I('<span class="svg-icon svg-icon-md" data-v-9770ab00><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" data-v-9770ab00><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" data-v-9770ab00><rect x="0" y="0" width="24" height="24" data-v-9770ab00></rect><path d="M6,8 L6,20.5 C6,21.3284271 6.67157288,22 7.5,22 L16.5,22 C17.3284271,22 18,21.3284271 18,20.5 L18,8 L6,8 Z" fill="#000000" fill-rule="nonzero" data-v-9770ab00></path><path d="M14,4.5 L14,4 C14,3.44771525 13.5522847,3 13,3 L11,3 C10.4477153,3 10,3.44771525 10,4 L10,4.5 L5.5,4.5 C5.22385763,4.5 5,4.72385763 5,5 L5,5.5 C5,5.77614237 5.22385763,6 5.5,6 L18.5,6 C18.7761424,6 19,5.77614237 19,5.5 L19,5 C19,4.72385763 18.7761424,4.5 18.5,4.5 L14,4.5 Z" fill="#000000" opacity="0.3" data-v-9770ab00></path></g></svg></span>',1),Ot=[zt],jt={key:0,class:"pos-account"},Ft={class:"fw-bolder"},Ht={class:"card card-custom mt-5"},Rt={class:"card-body"},Zt={class:"form-group"},Et=v(()=>t("label",null,"Select Customer",-1)),Jt={class:"form-group"},Kt=v(()=>t("label",null,"Payment Method",-1)),Gt=I('<option disabled="true" selected value="" data-v-9770ab00>~~ Select Payment Method~~</option><option value="han_cash" data-v-9770ab00>Han Cash</option><option value="bKash" data-v-9770ab00>bKash</option><option value="rocket" data-v-9770ab00>Rocket</option><option value="credit_card" data-v-9770ab00>Credit Card</option><option value="bank_check" data-v-9770ab00>Bank Check</option>',6),Wt=[Gt],Xt=v(()=>t("div",{class:"card-footer"},[t("button",{type:"submit",class:"btn btn-primary mr-2"},"Submit"),t("button",{type:"reset",class:"btn btn-secondary"},"Cancel")],-1)),Yt={class:"col-md-6"},te={class:"card card-custom"},ee=v(()=>t("div",{class:"card-header flex-wrap py-5"},[t("div",{class:"card-title"},[t("h3",{class:"card-label"},[w("All Products "),t("span",{class:"d-block text-muted pt-2 font-size-sm"},"all products with product details")])])],-1)),se={class:"card-body"},ae={class:"example-preview"},oe={key:1,class:"tab-content mt-5 show-product-overflow",id:"myTabContent1"},le={class:"tab-pane fade show active",id:"home-1",role:"tabpanel","aria-labelledby":"home-tab-1"},ne={class:"row match-height px-1"},ie=["onDblclick"],ce={class:"card cursor-pointer"},de={class:"card-body p-0 d-flex flex-column justify-content-between"},re={class:"card-image"},ue=["src"],ve={class:"card-heading fw-bold"},he={class:"card-text"},_e=["onClick"],me={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},be={class:"modal-dialog modal-lg"},pe={class:"modal-content"},ye={class:"modal-body"},fe={class:"row"},ge={class:"col-md-6"},we={class:"row"},xe={class:"col-md-4"},Ce={class:"img-preview-scroll"},ke=["src"],Te={class:"col-md-8"},Le=["src"],Se={class:"col-md-6"},Qe={class:"text-capitalize fw-bold"},$e={class:"text-capitalize"},Ie={class:"fw-bolder fs-2"},Me={class:"row border-top mt-3"},Pe={class:"col-md-12"},Ve=v(()=>t("hr",null,null,-1)),De=v(()=>t("h3",null,"Desscription",-1)),Ae=v(()=>t("hr",null,null,-1)),Be=v(()=>t("h3",null,"Desscription",-1)),Ue=["innerHTML"],Ne={__name:"Index",setup(a){const{sendRequest:x,loading:M,error:P}=vt(),i=kt(),h=r({customer:"",payby:""}),C=r([]),k=r([]),f=r(null),_=r(null),s=r([]);r([]),r([]),r(null),r([]);const l=async()=>{const o=await x("api/admin/pos-products");k&&(k.value=o)},d=async()=>{const o=await x("api/customer?onlyData");o&&(C.value=o)},at=tt(()=>{let o=k.value;return f.value&&(o=o.filter(n=>{var y,b;return(b=(y=n==null?void 0:n.product)==null?void 0:y.title)==null?void 0:b.toLowerCase().includes(f.value)})),_.value&&(o=o.filter(n=>{var y,b;return((b=(y=n==null?void 0:n.product)==null?void 0:y.category)==null?void 0:b.id)===_.value})),o}),ot=o=>{i.addToCart({...o,buyQty:1})},lt=()=>{i.addToCart({...s.value,buyQty:1}),$("#exampleModal").modal("hide")},nt=o=>{$("#exampleModal").modal("show"),s.value=o},it=async()=>{const o=await x({url:"api/pos",method:"POST",data:{...h.value,subTotal:i.getSubTotal(),products:i.getAllItems()}});o.message&&(i.clearCart(),h.value.customer="",h.value.payby="",Toast.fire({icon:"success",title:o.message}))},ct=o=>{console.log(o)};tt(()=>{let o=0;return i.getAllItems().map(n=>(o+=n.price*n.buyQty,o)),o});const dt=o=>{C.value.filter(n=>n.id===o)[0]};return ht(()=>{l(),d(),i.initCart()}),(o,n)=>{var b,D,A,B,U,N,q,z,O,j,F,H,R,Z,E,J,K,G,W,X,Y;const y=_t("v-select");return u(),m(Q,null,[t("div",null,[t("div",Tt,[t("div",Lt,[t("div",St,[Qt,t("div",$t,[t("table",It,[Mt,t("tbody",null,[(u(!0),m(Q,null,V(p(i).getAllItems(),(e,T)=>{var L,S;return u(),m("tr",{key:`card-product-${T}`},[t("td",null,[t("a",{href:"#",onClick:g=>o.showSingleProduct(e.id)},c((S=(L=e==null?void 0:e.product)==null?void 0:L.title)==null?void 0:S.slice(0,10))+"...",9,Pt)]),t("td",null,[w(c(e.buyQty)+" ",1),t("a",{href:"javascript:void(0);",onClick:g=>p(i).incrementQty(e.id),class:"btn btn-sm btn-clean btn-icon",title:"Delete"},At,8,Vt),t("a",{href:"javascript:;",onClick:g=>p(i).decrementQty(e.id),class:"btn btn-sm btn-clean btn-icon",title:"Delete"},Nt,8,Bt)]),t("td",null,c(e.price)+" $",1),t("td",null,c(e.price*(e==null?void 0:e.buyQty))+" $",1),t("td",null,[t("a",{href:"javascript:void(0)",onClick:g=>p(i).removeFromCart(e),class:"btn btn-sm btn-clean btn-icon",title:"Delete"},Ot,8,qt)])])}),128))])]),p(i).getSubTotal()>0?(u(),m("div",jt,[w(" Total Items: "),t("h4",Ft,"Sub Total: "+c(p(i).getSubTotal())+" $",1)])):mt("",!0)])]),t("div",Ht,[t("div",Rt,[w(c((D=(b=p(P))==null?void 0:b.response)==null?void 0:D.data)+" ",1),t("form",{onSubmit:n[2]||(n[2]=bt(e=>it(),["prevent"]))},[t("div",Zt,[Et,et(y,{options:C.value,class:"form-control form-control-solid",style:{padding:"0.375rem 0.75rem"},modelValue:h.value.customer,"onUpdate:modelValue":[n[0]||(n[0]=e=>h.value.customer=e),dt],reduce:e=>e.id,label:"full_name",placeholder:"Select Customer..."},null,8,["options","modelValue","reduce"])]),t("div",Jt,[Kt,st(t("select",{class:"form-control form-control-solid","onUpdate:modelValue":n[1]||(n[1]=e=>h.value.payby=e)},Wt,512),[[pt,h.value.payby]])]),Xt],32)])])]),t("div",Yt,[t("div",te,[ee,t("div",se,[st(t("input",{type:"text","onUpdate:modelValue":n[3]||(n[3]=e=>f.value=e),class:"form-control form-control-solid mb-3",placeholder:"Search....."},null,512),[[yt,f.value]]),t("div",ae,[et(xt,{class:"form-control form-control-solid",style:{padding:"0.375rem 0.75rem"},modelValue:_.value,"onUpdate:modelValue":[n[4]||(n[4]=e=>_.value=e),ct]},null,8,["modelValue"]),p(M)?(u(),ft(Ct,{key:0,style:{"min-height":"40vh"}})):(u(),m("div",oe,[t("div",le,[t("div",ne,[(u(!0),m(Q,null,V(at.value,(e,T)=>{var L,S,g;return u(),m("div",{class:"col-md-4 mt-2 px-1",onDblclick:rt=>ot(e),key:`pos-s-roduct-${T}`},[t("div",ce,[t("div",de,[t("div",re,[t("img",{src:`${(S=(L=e==null?void 0:e.product)==null?void 0:L.images[0])==null?void 0:S.url}`},null,8,ue)]),t("div",ve,c((g=e==null?void 0:e.product)==null?void 0:g.title)+"... ",1),t("div",he,c(e==null?void 0:e.price)+" $ ",1),t("a",{href:"javascript:void(0)",class:"card-button",onClick:rt=>nt(e)},"Show Details",8,_e)])])],40,ie)}),128))])])]))])])])])])]),t("div",me,[t("div",be,[t("div",pe,[t("div",ye,[t("div",fe,[t("div",ge,[t("div",we,[t("div",xe,[t("div",Ce,[(u(!0),m(Q,null,V((B=(A=s.value)==null?void 0:A.product)==null?void 0:B.images,(e,T)=>(u(),m("img",{class:"w-100",src:`${e==null?void 0:e.url}`,key:`single-image-${T}`},null,8,ke))),128))])]),t("div",Te,[t("img",{class:"w-100",src:`${(q=(N=(U=s.value)==null?void 0:U.product)==null?void 0:N.images[0])==null?void 0:q.url}`},null,8,Le)])])]),t("div",Se,[t("h1",Qe,c((O=(z=s.value)==null?void 0:z.product)==null?void 0:O.title)+"-"+c((F=(j=s.value.varient)==null?void 0:j.replace(/\//g,"-"))==null?void 0:F.slice(0,-1)),1),t("h4",null,"Product Sku: "+c((H=s.value)==null?void 0:H.sku),1),t("p",null,[w("Category: "),t("strong",null,c((E=(Z=(R=s.value)==null?void 0:R.product)==null?void 0:Z.category)==null?void 0:E.name),1)]),t("p",$e,"Variation: "+c((K=(J=s.value.varient)==null?void 0:J.replace(/\//g,"-"))==null?void 0:K.slice(0,-1)),1),t("h2",Ie,"Price: "+c(s.value.price)+" $",1),t("div",{class:"border-t w-100"},[t("button",{class:"btn btn-primary w-100 rounded-0 py-5 fs-2 fw-bold",onClick:lt},"Add To Pos")])])]),t("div",Me,[t("div",Pe,[Ve,t("div",null,[De,t("p",null,c((W=(G=s.value)==null?void 0:G.product)==null?void 0:W.description),1)]),Ae,t("div",null,[Be,t("div",{class:"product-content",innerHTML:(Y=(X=s.value)==null?void 0:X.product)==null?void 0:Y.details},null,8,Ue)])])])])])])])],64)}}},je=ut(Ne,[["__scopeId","data-v-9770ab00"]]);export{je as default};
