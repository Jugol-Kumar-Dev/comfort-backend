import{bH as Z,aQ as r,aE as ee,z as se,c as l,a as e,bg as s,H as u,P as G,b7 as m,b as p,v,F as ae,aT as te,o,av as le,e as oe,bo as ne}from"./app-ZJ2UjalZ.js";import{_ as J}from"./RequestLoading-9s5tgPFr.js";const de=e("div",{class:"card rounded-md bg-primary mb-3"},[e("div",{class:"card-body py-4 rounded-lg"},[e("p",{class:"p-0 m-0 text-white"},' "Begin by specifying the campaign name, subject, and body. Then, select the desired number of emails to send in each batch for optimal distribution." ')])],-1),ie={class:"card card-custom"},ce={class:"card-header"},re={class:"card-title d-flex gap-5"},ue={key:0},me={class:"card-body"},pe={class:"mt-3"},_e={class:"d-flex align-items-center gap-2"},ve=e("h2",null,"Select Emails",-1),he={class:"text-black"},be={class:"mt-5"},ge={class:"d-flex align-items-center gap-3"},fe={class:"mt-5 p-5 rounded-md d-flex align-items-center flex-wrap gap-2 emails__area"},xe=["for"],ye=["id","value"],ke={class:"mt-3"},we={class:"mt-3"},Ce=["disabled"],Se={key:0,class:"text-danger"},Ve={class:"mt-3"},Ee=["disabled"],je={key:0,class:"text-danger"},Te={class:"my-3"},Ae={class:"text-area"},Be=["disabled"],Ne={key:0,class:"text-danger"},Me={__name:"Panel",setup(Ue){const{sendRequest:y,loading:n,error:d}=Z(),h=r(null),b=r(null),g=r(null),i=r([]),f=r([]),_=r(null),K=()=>i.value=[];ee(async()=>{const c=await y("api/get-customers-emails");f.value=c.data});const k=se(()=>{var c;return _.value?(c=f.value)==null?void 0:c.filter(a=>a.includes(_.value)):f.value}),W=()=>i.value=k.value,X=async()=>{d.value=null,(await y({url:"api/send-emails",method:"POST",data:{emails:i.value,subject:b.value,message:g.value,campaign:h.value}})).value&&await Toast.fire({icon:"success",title:"Campaign Delete Successfully Done..."})};return(c,a)=>{var w,C,S,V,E,j,T,A,B,N,U,D,L,M,P,$,z,F,H,I,q,O,Q,R;return o(),l("div",null,[de,e("div",ie,[e("div",ce,[e("div",re,[s(n)?u("",!0):(o(),l("h3",ue,"Add Campaign")),G(J,{isShow:s(n),text:"Loading....."},null,8,["isShow"])])]),e("div",me,[e("div",pe,[e("div",_e,[ve,e("strong",he,"("+m(i.value.length)+" selected)",1)]),e("div",be,[e("div",ge,[p(e("input",{class:"form-control",style:{width:"80%"},"onUpdate:modelValue":a[0]||(a[0]=t=>_.value=t),placeholder:"search..."},null,512),[[v,_.value]]),e("div",{class:"d-flex align-items-center gap-3 flex-wrap"},[e("button",{class:"btn btn-primary",onClick:W},"Select All"),e("button",{class:"btn btn-danger",onClick:K},"Clear Selected")])])]),e("div",fe,[(o(!0),l(ae,null,te(k.value,(t,x)=>(o(),l("div",{class:"d-flex single__email__body cursor-pointer",key:x},[e("label",{for:`checkbox-${x}`,class:le(["single__email cursor-pointer",{checked:i.value.includes(t)}])},[oe(m(t)+" ",1),p(e("input",{type:"checkbox",id:`checkbox-${x}`,value:t,class:"d-none","onUpdate:modelValue":a[1]||(a[1]=Y=>i.value=Y)},null,8,ye),[[ne,i.value]])],10,xe)]))),128))]),e("div",ke,[e("div",we,[p(e("input",{type:"text",disabled:s(n),"onUpdate:modelValue":a[2]||(a[2]=t=>h.value=t),placeholder:"Campaign Name.....",class:"form-control"},null,8,Ce),[[v,h.value]]),(V=(S=(C=(w=s(d))==null?void 0:w.response)==null?void 0:C.data)==null?void 0:S.errors)!=null&&V.campaign?(o(),l("small",Se,m((A=(T=(j=(E=s(d))==null?void 0:E.response)==null?void 0:j.data)==null?void 0:T.errors)==null?void 0:A.campaign[0]),1)):u("",!0)]),e("div",Ve,[p(e("input",{type:"text",disabled:s(n),"onUpdate:modelValue":a[3]||(a[3]=t=>b.value=t),placeholder:"Campaign Subject.....",class:"form-control"},null,8,Ee),[[v,b.value]]),(D=(U=(N=(B=s(d))==null?void 0:B.response)==null?void 0:N.data)==null?void 0:U.errors)!=null&&D.subject?(o(),l("small",je,m(($=(P=(M=(L=s(d))==null?void 0:L.response)==null?void 0:M.data)==null?void 0:P.errors)==null?void 0:$.subject[0]),1)):u("",!0)]),e("div",Te,[e("div",Ae,[p(e("textarea",{disabled:s(n),"onUpdate:modelValue":a[4]||(a[4]=t=>g.value=t),class:"form-control",rows:"7",placeholder:"Campaign Body......."},null,8,Be),[[v,g.value]]),(I=(H=(F=(z=s(d))==null?void 0:z.response)==null?void 0:F.data)==null?void 0:H.errors)!=null&&I.message?(o(),l("small",Ne,m((R=(Q=(O=(q=s(d))==null?void 0:q.response)==null?void 0:O.data)==null?void 0:Q.errors)==null?void 0:R.message[0]),1)):u("",!0)])]),s(n)?u("",!0):(o(),l("button",{key:0,class:"btn btn-lg btn-primary",onClick:X},"Send Emails")),G(J,{isShow:s(n),text:"Loading...."},null,8,["isShow"])])])])])])}}};export{Me as default};
