import{_ as T}from"./TreeCategory-Ygb9dLl0.js";import{_ as U,bJ as L,aV as k,c as n,a as t,G as N,H as m,av as P,P as g,w as S,b as h,v as _,b7 as f,F as v,aT as b,o as r,br as R,p as M,d as A}from"./app-ZJ2UjalZ.js";import{S as B}from"./SummernoteEditor--npYoqSm.js";import{C as F}from"./ComponentLoader-v4UpLI7l.js";import{_ as z}from"./RequestLoading-9s5tgPFr.js";const j={name:"Index",components:{RequestLoading:z,ComponentLoader:F,TreeCategory:T,SummernoteEditor:B,Uploader:L},data(){return{varientName:null,currentTab:"details",variationDivider:"/",varientSkuPrefix:"Ver-",productDetails:{productName:null,defaultPrice:null,defaultStoke:null,description:null,details:null,categoryId:null,brandId:null,warranty:null,features:null,video_url:null,productImages:null},images:[],variants:[],product_variant:[{option:1,tags:[]}],product_variant_prices:[],variationValues:[],content:null,editorOption:{},brands:[],errors:{},productImages:[],loading:!1}},methods:{initImages(s){console.log(s)},changeMedia(s){this.images=s},setActiveTab(s){this.currentTab=s},changeVariation(s){var e;this.variationValues[s]=(e=this.variants.find(d=>d.id===parseInt(event.target.value)))==null?void 0:e.variation_options},removeItem(s){var e;(e=this.product_variant)==null||e.splice(s,1),this.checkVariant()},newVariant(){let s=this.variants.map(u=>u.id),e=this.product_variant.map(u=>u.option),d=s.filter(u=>!e.some(a=>u==a));this.product_variant.push({option:d[0],tags:[]})},checkVariant(){let s=[];this.product_variant_prices=[],this.product_variant.filter(e=>{s.push(e.tags),console.log(e)}),this.getCombn(s).forEach(e=>{this.product_variant_prices.push({title:e,price:this.productDetails.defaultPrice,stock:this.productDetails.defaultStoke})})},getCombn(s,e){if(e=e||"",!s.length)return e;let d=this;return s[0].reduce(function(a,l){return a.concat(d.getCombn(s.slice(1),e+l+"/"))},[])},saveNewVarient(){this.loading=!0,this.$axios.post("/api/create-varient",{name:this.varientName}).then(s=>{this.varientName=null,Toast.fire({icon:"success",title:"variation Created Success..."}),$("#addVariaion").modal("hide"),this.allVerients()}).catch(s=>{this.errors=s.response.data.errors,Toast.fire({icon:"warning",title:s.response.data.message})}).finally(()=>this.loading=!1)},allVerients(){this.loading=!0,this.$axios.get("/api/varients",this.from).then(s=>{this.variants=s.data,Toast.fire({icon:"success",title:"Ready For Product Create..."})}).catch(s=>{this.errors=s.response.data.errors,Toast.fire({icon:"warning",title:s.response.data.message})}).finally(()=>this.loading=!1)},allBrands(){this.loading=!0,this.$axios.get("/api/brand",this.from).then(s=>{this.brands=s.data}).catch(s=>{this.errors=s.response.data.errors,Toast.fire({icon:"warning",title:s.response.data.message})}).finally(()=>this.loading=!1)},updateProductDetails(){this.loading=!0,this.$axios.put(`/api/product/${this.$route.params.id}`,this.productDetails).then(s=>{Toast.fire({icon:"success",title:s.data.message}),this.$refs.Close.click(),this.allProducts()}).catch(s=>{console.log(s)}).finally(()=>this.loading=!1)},saveVariation(){this.loading=!0,this.$axios.post("/api/save-product-variations",{variations:this.product_variant_prices,varArray:this.product_variant,productId:this.$route.params.id}).then(s=>{Toast.fire({icon:"success",title:"variation Update Success..."})}).catch(s=>{Toast.fire({icon:"error",title:s.response.data.message})}).finally(()=>this.loading=!1)},saveImages(){this.loading=!0;const s=new FormData;for(let e=0;e<this.images.length;e++)s.append(`files[${e}]`,this.images[e].file);s.append("productId",this.$route.params.id),this.$axios.post("/api/save-product-images",s).then(e=>{Toast.fire({icon:"success",title:"Image Update Success..."})}).catch(e=>{Toast.fire({icon:"error",title:e.response.data.message})}).finally(()=>this.loading=!1)},handleFileChange(s){for(let e=0;e<s.target.files.length;e++)this.images.push({url:URL.createObjectURL(s.target.files[e]),file:s.target.files[e]});console.log(this.images)},async fileChange(s){this.isLoading=!0;let e=s.target.files;for(var d=0;d<e.length;d++){let u=URL.createObjectURL(e[d]);e[d].name,e[d].size,e[d].type}},removeMedia(s){let e=this.images[s];e.url.startsWith("blob:")&&URL.revokeObjectURL(e.url),this.images.splice(s,1)},getProduct(){this.loading=!0,this.$axios.get(`/api/product/${this.$route.params.id}`).then(s=>{var e,d,u,a,l,D,x,C,y,V,w,o,c;console.log(s.data),this.productDetails.productName=(e=s.data)==null?void 0:e.title,this.productDetails.defaultPrice=(d=s.data)==null?void 0:d.price,this.productDetails.defaultStoke=(u=s.data)==null?void 0:u.stock,this.productDetails.description=(a=s.data)==null?void 0:a.description,this.productDetails.details=(l=s.data)==null?void 0:l.details,this.productDetails.categoryId=(x=(D=s.data)==null?void 0:D.category)==null?void 0:x.id,this.productDetails.brandId=(y=(C=s.data)==null?void 0:C.brand)==null?void 0:y.id,this.productDetails.warranty=(V=s.data)==null?void 0:V.warranty,this.productDetails.features=(w=s.data)==null?void 0:w.features,this.productDetails.video_url=(o=s.data)==null?void 0:o.video_url,this.productDetails.productImages=(c=s.data)==null?void 0:c.images}).catch(s=>{console.log(s)}).finally(()=>this.loading=!1)},deleteImage(s,e){confirm("Are you sure? Want To Remove This Image...")&&this.$axios.delete("/api/delete-product-image/"+s).then(d=>{Toast.fire({icon:"success",title:"Image Delete Success..."}),this.productImages.splice(e,1)}).catch(d=>{Toast.fire({icon:"error",title:d.response.data.message})})}},created(){this.allVerients(),this.allBrands(),this.getProduct()}},i=s=>(M("data-v-2c1a39dd"),s=s(),A(),s),O={class:"row"},E={class:"col-md-3 d-flex flex-column gap-2"},G=i(()=>t("div",{class:"card-body p-4"}," Product Details ",-1)),q=[G],W=i(()=>t("div",{class:"card-body p-4"}," Product Variants ",-1)),Y=[W],H=i(()=>t("div",{class:"card-body p-4"}," Product Images ",-1)),J=[H],Q={class:"col-md-9"},K={key:0,class:"card"},X={class:"card-header py-3 d-flex flex-row align-items-center justify-content-between"},Z=i(()=>t("h3",{class:"card-title m-0"},"Product Details",-1)),tt={class:"card-body"},et={class:"form-row"},st={class:"col-md-4 form-group"},ot=i(()=>t("label",{for:"productname"},"Product Name",-1)),at={class:"col-md-4 form-group"},it=i(()=>t("label",{for:"dPrice"},"Default Price",-1)),lt={class:"col-md-4 form-group"},rt=i(()=>t("label",{for:"defaultStoke"},"Default Quantity",-1)),nt={class:"form-row"},dt={class:"col-md-6 form-group"},ct=i(()=>t("label",null,"Category",-1)),ut={class:"col-md-6 form-group"},mt=i(()=>t("label",null,"Brand",-1)),pt={class:"form-group"},ht=i(()=>t("label",{for:"description"},"Description",-1)),_t={class:"form-group"},vt=i(()=>t("label",null,"Full Details",-1)),gt={class:"form-group"},ft=i(()=>t("label",{for:"description"},"Warranty & Support",-1)),bt={key:0,class:"text-danger"},yt={class:"form-group"},Vt=i(()=>t("label",null,"Features & Benefits",-1)),wt={key:0,class:"text-danger"},kt={class:"form-group"},Dt=i(()=>t("label",{for:"description"},"Video Iframe Link",-1)),xt={key:0,class:"text-danger"},Ct={key:1,class:"card"},It={class:"card-header py-3 d-flex flex-row align-items-center justify-content-between"},Pt=i(()=>t("h3",{class:"m-0 font-weight-bold text-primary"},"Variants",-1)),St={class:"d-flex gap-3"},Tt=i(()=>t("button",{class:"btn btn-info btn-sm","data-toggle":"modal","data-target":"#addVariaion"},[t("i",{class:"bi bi-plus"}),t("span",null,"Add New Variation")],-1)),Ut={key:0,class:"card-body"},Lt={class:"row"},Nt={class:"col-md-4"},Rt={class:"form-group"},Mt=i(()=>t("label",{for:"variation"},[t("span",null,"Variation")],-1)),At=["onUpdate:modelValue","onChange"],Bt=["value"],Ft={class:"col-md-8"},zt={class:"form-group"},jt=["onClick"],Ot=i(()=>t("label",null,"Variation Options",-1)),Et={class:"container"},Gt={class:"selectpicker",multiple:"","aria-label":"Default select example","data-live-search":"true"},qt=["value"],Wt={key:1,class:"card-footer"},Yt=i(()=>t("div",{class:"card-header text-uppercase"},"Preview",-1)),Ht={class:"card-body"},Jt={class:"table-responsive"},Qt={class:"table"},Kt=i(()=>t("thead",null,[t("tr",null,[t("td",null,"Variant"),t("td",null,"Price"),t("td",null,"Stock"),t("td",null,"Sku Id")])],-1)),Xt={key:0},Zt=["onUpdate:modelValue"],$t=["onUpdate:modelValue"],te=["onUpdate:modelValue"],ee={key:2,class:"card"},se={class:"card-body"},oe={class:"card-header py-3 d-flex flex-row align-items-center justify-content-between"},ae=i(()=>t("div",{class:"d-flex flex-column gap-2"},[t("h2",{class:"card-title m-0"},"Product Images"),t("span",{class:"text-danger w-50 mt-4"},"Please upload images in JPG, PNG, or GIF format with dimensions of 550 x 550 pixels. The maximum file size allowed is 500 KB.")],-1)),ie={class:"mu-elements-wraper"},le=["src"],re=["onClick"],ne=i(()=>t("svg",{class:"mu-times-icon",xmlns:"http://www.w3.org/2000/svg",width:"0.65em",height:"0.65em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 352 512"},[t("path",{d:"m242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28L75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256L9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z",fill:"currentColor"})],-1)),de=[ne],ce=["src"],ue=["onClick"],me=i(()=>t("svg",{class:"mu-times-icon",xmlns:"http://www.w3.org/2000/svg",width:"0.65em",height:"0.65em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 352 512"},[t("path",{d:"m242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28L75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256L9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z",fill:"currentColor"})],-1)),pe=[me],he={class:"mu-plusbox-container"},_e=i(()=>t("label",{for:"mu-file-input",class:"mu-plusbox"},[t("svg",{class:"mu-plus-icon",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},[t("g",{fill:"none"},[t("path",{d:"M12 1C5.925 1 1 5.925 1 12s4.925 11 11 11s11-4.925 11-11S18.075 1 12 1zm1 15a1 1 0 1 1-2 0v-3H8a1 1 0 1 1 0-2h3V8a1 1 0 1 1 2 0v3h3a1 1 0 1 1 0 2h-3v3z",fill:"currentColor"})])])],-1)),ve={key:3,class:"card"},ge={class:"card-body d-flex gap-2"},fe=i(()=>t("button",{class:"btn btn-lg btn-danger"},"Reset Form",-1)),be={class:"modal fade",id:"addVariaion",tabindex:"-1",role:"dialog","aria-hidden":"false"},ye={class:"modal-dialog modal-md",role:"document"},Ve={class:"modal-content"},we={class:"modal-header"},ke=i(()=>t("div",{class:"d-flex gap-3"},[t("h5",{class:"modal-title",id:"exampleModalLabel"},"Add Variation")],-1)),De={type:"button",class:"close",ref:"Close","data-dismiss":"modal","aria-label":"Close"},xe=i(()=>t("i",{"aria-hidden":"true",class:"ki ki-close"},null,-1)),Ce=[xe],Ie={class:"modal-body"},Pe={class:"form-row"},Se=i(()=>t("label",{for:"var_name"},"Variation Name",-1)),Te=i(()=>t("button",{class:"btn btn-sm btn-primary mt-4",type:"submit"},"Save",-1));function Ue(s,e,d,u,a,l){var w;const D=k("ComponentLoader"),x=k("RequestLoading"),C=k("TreeCategory"),y=k("v-select"),V=k("SummernoteEditor");return r(),n(v,null,[t("section",null,[a.loading?(r(),N(D,{key:0})):m("",!0),t("div",O,[t("div",E,[t("div",{class:P(["card cursor-pointer",{"bg-primary text-white fw-bolder":a.currentTab==="details"}]),onClick:e[0]||(e[0]=o=>l.setActiveTab("details"))},q,2),t("div",{class:P(["card cursor-pointer",{"bg-primary text-white fw-bolder":a.currentTab==="variants"}]),onClick:e[1]||(e[1]=o=>l.setActiveTab("variants"))},Y,2),t("div",{class:P(["card cursor-pointer",{"bg-primary text-white fw-bolder":a.currentTab==="images"}]),onClick:e[2]||(e[2]=o=>l.setActiveTab("images"))},J,2)]),t("div",Q,[a.currentTab==="details"?(r(),n("div",K,[t("div",X,[t("div",null,[Z,g(x,{"is-show":a.loading},null,8,["is-show"])]),t("button",{class:"btn btn-primary btn-sm",onClick:e[3]||(e[3]=(...o)=>l.updateProductDetails&&l.updateProductDetails(...o))},"Update Info")]),t("div",tt,[t("form",{onSubmit:e[14]||(e[14]=S((...o)=>l.updateProductDetails&&l.updateProductDetails(...o),["prevent"]))},[t("div",et,[t("div",st,[ot,h(t("input",{type:"text",id:"productname","onUpdate:modelValue":e[4]||(e[4]=o=>a.productDetails.productName=o),placeholder:"Product Name",class:"form-control"},null,512),[[_,a.productDetails.productName]])]),t("div",at,[it,h(t("input",{type:"text",id:"dPrice","onUpdate:modelValue":e[5]||(e[5]=o=>a.productDetails.defaultPrice=o),placeholder:"Default Price.",class:"form-control"},null,512),[[_,a.productDetails.defaultPrice]])]),t("div",lt,[rt,h(t("input",{type:"text",id:"defaultStoke","onUpdate:modelValue":e[6]||(e[6]=o=>a.productDetails.defaultStoke=o),placeholder:"Default Quantity...",class:"form-control"},null,512),[[_,a.productDetails.defaultStoke]])])]),t("div",nt,[t("div",dt,[ct,g(C,{modelValue:a.productDetails.categoryId,"onUpdate:modelValue":e[7]||(e[7]=o=>a.productDetails.categoryId=o)},null,8,["modelValue"])]),t("div",ut,[mt,g(y,{modelValue:a.productDetails.brandId,"onUpdate:modelValue":e[8]||(e[8]=o=>a.productDetails.brandId=o),class:"form-control",reduce:o=>o.id,options:a.brands,label:"title",placeholder:"Select Brand..."},null,8,["modelValue","reduce","options"])])]),t("div",pt,[ht,h(t("textarea",{"onUpdate:modelValue":e[9]||(e[9]=o=>a.productDetails.description=o),id:"description",cols:"30",rows:"4",class:"form-control"},null,512),[[_,a.productDetails.description]])]),t("div",_t,[vt,g(V,{modelValue:a.productDetails.details,"onUpdate:modelValue":e[10]||(e[10]=o=>a.productDetails.details=o)},null,8,["modelValue"])]),t("div",gt,[ft,h(t("textarea",{"onUpdate:modelValue":e[11]||(e[11]=o=>a.productDetails.warranty=o),id:"description",cols:"30",rows:"4",class:"form-control"},null,512),[[_,a.productDetails.warranty]]),a.errors.warranty?(r(),n("small",bt,f(a.errors.warranty[0]),1)):m("",!0)]),t("div",yt,[Vt,g(V,{modelValue:a.productDetails.features,"onUpdate:modelValue":e[12]||(e[12]=o=>a.productDetails.features=o)},null,8,["modelValue"]),a.errors.features?(r(),n("small",wt,f(a.errors.features[0]),1)):m("",!0)]),t("div",kt,[Dt,h(t("textarea",{"onUpdate:modelValue":e[13]||(e[13]=o=>a.productDetails.video_url=o),id:"description",cols:"30",rows:"6",class:"form-control"},null,512),[[_,a.productDetails.video_url]]),a.errors.video_url?(r(),n("small",xt,f(a.errors.video_url[0]),1)):m("",!0)])],32)])])):m("",!0),a.currentTab==="variants"?(r(),n("div",Ct,[t("div",It,[Pt,t("div",St,[Tt,t("button",{class:"btn btn-primary btn-sm",onClick:e[15]||(e[15]=(...o)=>l.saveVariation&&l.saveVariation(...o))},"Save Variations")])]),a.product_variant.length>0?(r(),n("div",Ut,[(r(!0),n(v,null,b(a.product_variant,(o,c)=>{var I;return r(),n("div",Lt,[t("div",Nt,[t("div",Rt,[Mt,h(t("select",{id:"variation","onUpdate:modelValue":p=>o.option=p,onChange:p=>l.changeVariation(c),class:"form-control"},[(r(!0),n(v,null,b(a.variants,p=>(r(),n("option",{value:p.id},f(p.name),9,Bt))),256))],40,At),[[R,o.option]])])]),t("div",Ft,[t("div",zt,[((I=a.product_variant)==null?void 0:I.length)!==1?(r(),n("label",{key:0,onClick:p=>l.removeItem(c),class:"float-right text-primary",style:{cursor:"pointer"}},"Remove",8,jt)):m("",!0),Ot,t("div",Et,[t("select",Gt,[(r(!0),n(v,null,b(a.variationValues[c],p=>(r(),n("option",{value:p},f(p.name),9,qt))),256))])]),g(y,{modelValue:o.tags,"onUpdate:modelValue":[p=>o.tags=p,l.checkVariant],label:"name",class:"form-control",multiple:"",taggable:"",placeholder:"Select Variation Options..."},null,8,["modelValue","onUpdate:modelValue"])])])])}),256))])):m("",!0),((w=a.product_variant)==null?void 0:w.length)<a.variants.length?(r(),n("div",Wt,[t("button",{onClick:e[16]||(e[16]=o=>l.newVariant()),class:"btn btn-primary"},"Add another option")])):m("",!0),Yt,t("div",Ht,[t("div",Jt,[t("table",Qt,[Kt,a.product_variant_prices.length>0?(r(),n("tbody",Xt,[(r(!0),n(v,null,b(a.product_variant_prices,o=>(r(),n("tr",null,[t("td",null,f(o.title),1),t("td",null,[h(t("input",{type:"number",class:"form-control","onUpdate:modelValue":c=>o.price=c},null,8,Zt),[[_,o.price]])]),t("td",null,[h(t("input",{type:"number",class:"form-control","onUpdate:modelValue":c=>o.stock=c},null,8,$t),[[_,o.stock]])]),t("td",null,[h(t("input",{type:"text",class:"form-control","onUpdate:modelValue":c=>o.sku=c,placeholder:"e.g Not Fillable, Auto Generated."},null,8,te),[[_,o.sku]])])]))),256))])):m("",!0)])])])])):m("",!0),a.currentTab==="images"?(r(),n("div",ee,[t("div",se,[t("div",oe,[ae,t("button",{class:"btn btn-primary btn-sm",onClick:e[17]||(e[17]=(...o)=>l.saveImages&&l.saveImages(...o))},"Save Images")]),t("div",{class:P(["mu-container",s.isInvalid?"mu-red-border":""])},[t("div",ie,[(r(!0),n(v,null,b(a.productDetails.productImages,(o,c)=>(r(),n("div",{key:c,class:"mu-image-container"},[t("img",{src:`/storage/uploads/${o.image}`,alt:"",class:"mu-images-preview"},null,8,le),t("button",{onClick:I=>l.deleteImage(o==null?void 0:o.id,c),class:"mu-close-btn",type:"button"},de,8,re)]))),128)),(r(!0),n(v,null,b(a.images,(o,c)=>(r(),n("div",{key:c,class:"mu-image-container"},[t("img",{src:o.url,alt:"",class:"mu-images-preview"},null,8,ce),t("button",{onClick:I=>l.removeMedia(c),class:"mu-close-btn",type:"button"},pe,8,ue)]))),128)),t("div",he,[_e,t("input",{onChange:e[18]||(e[18]=(...o)=>l.handleFileChange&&l.handleFileChange(...o)),id:"mu-file-input",type:"file",accept:"image/*",multiple:"",hidden:""},null,32)])])],2)])])):m("",!0),a.currentTab==="seo"?(r(),n("div",ve,[t("div",ge,[t("button",{class:"btn btn-lg btn-primary",onClick:e[19]||(e[19]=(...o)=>s.saveProduct&&s.saveProduct(...o))},"Save Product"),fe])])):m("",!0)])])]),t("div",be,[t("div",ye,[t("div",Ve,[t("div",we,[ke,t("button",De,Ce,512)]),t("div",Ie,[t("form",{onSubmit:e[21]||(e[21]=S((...o)=>l.saveNewVarient&&l.saveNewVarient(...o),["prevent"]))},[t("div",Pe,[Se,h(t("input",{type:"text",id:"var_name","onUpdate:modelValue":e[20]||(e[20]=o=>a.varientName=o),placeholder:"Variation Name",class:"form-control"},null,512),[[_,a.varientName]])]),Te],32)])])])])],64)}const Be=U(j,[["render",Ue],["__scopeId","data-v-2c1a39dd"]]);export{Be as default};
