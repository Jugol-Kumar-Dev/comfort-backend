import{aQ as _,bH as D,aE as z,c as i,a as e,bg as g,G as I,F as B,aT as P,P as M,b7 as a,e as Z,b as V,v as A,H as O,o,O as E}from"./app-ZJ2UjalZ.js";import{_ as F}from"./Pagination-10ZR4_Ts.js";import{C as H}from"./ComponentLoader-v4UpLI7l.js";import{_ as Q}from"./RequestLoading-9s5tgPFr.js";const R={key:1,class:"card card-custom"},G=e("div",{class:"card-header flex-wrap py-5"},[e("div",{class:"card-title"},[e("h3",{class:"card-label"},"Stoke Management ")])],-1),Y={class:"card-body"},j={class:"table table-separate table-head-custom table-checkable",id:""},J=e("thead",null,[e("tr",null,[e("th",null,"Record ID"),e("th",null,"Title"),e("th",null,"Variant"),e("th",null,"Stoke Status"),e("th",null,"Unit price"),e("th",null,"Courrent Stoke"),e("th",null,"Actions")])],-1),K={class:"d-flex flex-column"},W={class:"fw-bold"},X={class:"fs-6"},ee={key:0,class:"badge badge-success bg-success fw-bold text-white"},te={key:1,class:"badge badge-danger bg-danger fw-bold text-white"},se=["onClick"],le=E('<span class="svg-icon svg-icon-md"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><rect x="0" y="0" width="24" height="24"></rect><path d="M8,17.9148182 L8,5.96685884 C8,5.56391781 8.16211443,5.17792052 8.44982609,4.89581508 L10.965708,2.42895648 C11.5426798,1.86322723 12.4640974,1.85620921 13.0496196,2.41308426 L15.5337377,4.77566479 C15.8314604,5.0588212 16,5.45170806 16,5.86258077 L16,17.9148182 C16,18.7432453 15.3284271,19.4148182 14.5,19.4148182 L9.5,19.4148182 C8.67157288,19.4148182 8,18.7432453 8,17.9148182 Z" fill="#000000" fill-rule="nonzero" transform="translate(12.000000, 10.707409) rotate(-135.000000) translate(-12.000000, -10.707409) "></path><rect fill="#000000" opacity="0.3" x="5" y="20" width="15" height="2" rx="1"></rect></g></svg></span>',1),ae=[le],oe=["onClick"],ne=E('<span class="svg-icon svg-icon-dark-50 svg-icon-2x"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><rect x="0" y="0" width="24" height="24"></rect><path d="M6,8 L18,8 L17.106535,19.6150447 C17.04642,20.3965405 16.3947578,21 15.6109533,21 L8.38904671,21 C7.60524225,21 6.95358004,20.3965405 6.89346498,19.6150447 L6,8 Z M8,10 L8.45438229,14.0894406 L15.5517885,14.0339036 L16,10 L8,10 Z" fill="#000000" fill-rule="nonzero"></path><path d="M14,4.5 L14,3.5 C14,3.22385763 13.7761424,3 13.5,3 L10.5,3 C10.2238576,3 10,3.22385763 10,3.5 L10,4.5 L5.5,4.5 C5.22385763,4.5 5,4.72385763 5,5 L5,5.5 C5,5.77614237 5.22385763,6 5.5,6 L18.5,6 C18.7761424,6 19,5.77614237 19,5.5 L19,5 C19,4.72385763 18.7761424,4.5 18.5,4.5 L14,4.5 Z" fill="#000000" opacity="0.3"></path></g></svg></span>',1),ie=[ne],de=e("tbody",null,null,-1),ce={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},re={class:"modal-dialog"},he={class:"modal-content"},ue={class:"card"},_e={class:"card-body"},me={class:"fw-bold"},ve={class:"fw-bold"},ge={class:"fw-bold"},we={class:"fw-bold"},be={class:"fw-bolder"},fe={class:"badge bg-primary"},ke=e("hr",{class:"border broder-1"},null,-1),pe=e("label",{for:"qty",class:"m-0 p-0"},"Add Stoke Quantity",-1),xe={class:"mt-2"},ye=e("label",{for:"price",class:"m-0 p-0"},"Change Variant Price",-1),Me={__name:"Stoke",setup(Ce){const d=User.userInfo(),c=_([]),{sendRequest:m,loading:v}=D(),n=_({}),h=_(null),r=_(null),q=s=>{$("#exampleModal").modal("show"),n.value=s,r.value=s==null?void 0:s.price},T=async()=>{var l;const s=await m({method:"put",data:{qty:h.value,price:r.value},url:`/api/admin/update-stokes/${(l=n.value)==null?void 0:l.id}`,headers:{Authorization:`Bearer ${d==null?void 0:d.token}`}});s!=null&&s.message&&(h.value=null,r.value=null,await u(),$("#exampleModal").modal("hide"),Toast.fire({icon:"success",title:s==null?void 0:s.message})),console.log(s)},u=async s=>{const l=await m({method:"get",url:s??"/api/admin/product-stokes",headers:{Authorization:`Bearer ${d==null?void 0:d.token}`}});c.value=l};function N(s){Swal.fire({title:"Are You Sure!",text:"you watnt to delete this?",icon:"warning",confirmButtonColor:"#ddd",cancelButtonColor:"red",confirmButtonText:"Delete",showCancelButton:!0}).then(async l=>{l.value&&(m({url:"/api/delete-product-stoke/"+s,method:"DELETE"}),Toast.fire({icon:"success",title:res.data.message}),await u())}).catch(l=>{console.log(l),Swal.fire({icon:"success",title:"dont worry. your data is safe..."}),this.$router.push({name:"ManageEmployee"})})}return z(async()=>{await u()}),(s,l)=>{var w,b,f,k,p,x,y,C;return o(),i(B,null,[e("div",null,[g(v)?(o(),I(H,{key:0})):(o(),i("div",R,[G,e("div",Y,[e("table",j,[J,(o(!0),i(B,null,P((w=c.value)==null?void 0:w.data,(t,L)=>{var S;return o(),i("tr",{key:`stoke-${L}`},[e("td",null,"#_"+a(L+1),1),e("td",null,[e("div",K,[e("h5",W,a((S=t==null?void 0:t.product)==null?void 0:S.title),1),e("small",X,"Sku: "+a(t==null?void 0:t.sku),1)])]),e("td",null,a(t==null?void 0:t.varient),1),e("td",null,[t.qty>0?(o(),i("span",ee,"Available In Stoke")):(o(),i("span",te,"Out Of Stoke"))]),e("td",null,a(t==null?void 0:t.price)+" $",1),e("td",null,a(t.qty),1),e("td",null,[e("button",{onClick:U=>q(t),class:"btn btn-sm btn-clean btn-icon",title:"Edit details"},ae,8,se),e("button",{class:"btn btn-icon ms-2",title:"Edit details",onClick:U=>N(t==null?void 0:t.id)},ie,8,oe)])])}),128)),de]),M(F,{onSomeEvent:u,links:c.value.links,from:c.value.from,to:c.value.to,total:c.value.total,notShowNumber:!1},null,8,["links","from","to","total"])])]))]),e("div",ce,[e("div",re,[e("div",he,[e("div",ue,[e("div",_e,[e("h4",me,"Product: "+a((f=(b=n.value)==null?void 0:b.product)==null?void 0:f.title),1),e("h6",ve,"Varient: "+a((x=(p=(k=n.value)==null?void 0:k.varient)==null?void 0:p.replace(/\//g,"-"))==null?void 0:x.slice(0,-1)),1),e("h6",ge,"Sku: "+a((y=n.value)==null?void 0:y.sku),1),e("h6",we,"Unit Price: "+a((C=n.value)==null?void 0:C.price)+" $",1),e("h6",be,[Z("Current Stoke: "),e("span",fe,a(n.value.qty),1)]),ke,e("div",null,[pe,V(e("input",{"onUpdate:modelValue":l[0]||(l[0]=t=>h.value=t),id:"qty",class:"form-control",placeholder:"e.g Add more 500 pc"},null,512),[[A,h.value]])]),e("div",xe,[ye,V(e("input",{"onUpdate:modelValue":l[1]||(l[1]=t=>r.value=t),id:"price",class:"form-control",placeholder:"e.g Add more 500 pc"},null,512),[[A,r.value]])]),M(Q,{"is-show":g(v)},null,8,["is-show"]),g(v)?O("",!0):(o(),i("button",{key:0,class:"btn btn-primary ms-auto mt-3",onClick:T}," Update Variant "))])])])])])],64)}}};export{Me as default};
